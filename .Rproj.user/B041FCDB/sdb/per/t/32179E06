{
    "collab_server" : "",
    "contents" : "PlotDaliaTeff <- function(patient, ACC, tube, week, minCard = 1, mar1, mar2, btfOnly = FALSE){\n  \n  patindexesW26 <- c(1:11,13:16,18)\n  outpath <- \"~/DaliaTcells/Pat\"\n  if(btfOnly)\n  {\n    old_tot <- get(load(paste0(outpath, patindexesW26[patient], \"/ACC\", ACC, \"_Tube_0\", tube, \"_w\", week, \"_CD4 T cells.fcs.Rdata\")))\n    new_tot <- get(load(paste0(outpath, patindexesW26[patient], \"/ACC\", ACC, \"_Tube_0\", tube, \"_w\", week, \n                               \"_CD4 T cells (T cells (Lymphocytes (Living cells))).fcs.Rdata\")))\n    tempH <- new_tot[compMat2(old_tot, new_tot),]\n    data <- fluoMarTube13(DataEx(tempH, trans = \"log\"))\n    zerRM <- zeroRM(data[,c(mar1)], data[,c(mar2)], NULL)\n    dataM1 <- zerRM$m1\n    dataM2 <- zerRM$m2\n    indrm <- zerRM$indrm\n    \n    btf <- btfW26(\"~/DaliaTcells/AnalyseDaliaW26TcellsBtf.Rdata\", patient)\n    ind_inter_btf <- get(load(paste0(outpath, patindexesW26[patient], \"/ACC\", ACC, \"_Tube_0\", tube, \"_w\", week, \n                                     \"_Living cells.fcs.Rdata\")))\n    ind <- compMat2(tempH,ind_inter_btf)\n    btf_labels <- relabel(btf$labels[ind])\n    btf_comb <- btf$combinations[ind,]\n    par(mfrow=c(1,1))\n    if(length(indrm))\n    {\n      plot(dataM1, dataM2, col = btf_labels[-c(indrm)], xlab = mar1, ylab = mar2, main = \"BTF\")\n    }\n    else\n    {\n      plot(dataM1, dataM2, col = btf_labels, xlab = mar1, ylab = mar2, main = \"BTF\")\n    }\n    legend(\"bottomleft\",as.character(c(2:5)),cex=.5, col=c(2:5),fill=c(2:5))\n    \n  }\n  else\n  {\n    old_tot <- paste0(outpath, patindexesW26[patient], \"/ACC\", ACC, \"_Tube_0\", tube, \"_w\", week, \"_CD4 T cells.fcs.Rdata\")\n    new_tot <- paste0(outpath, patindexesW26[patient], \"/ACC\", ACC, \"_Tube_0\", tube, \"_w\", week, \n                      \"_CD4 T cells (T cells (Lymphocytes (Living cells))).fcs.Rdata\")\n    EffTcells <- paste0(outpath, patindexesW26[patient], \"/ACC\", ACC, \"_Tube_0\", tube, \"_w\", week,\n                        \"_Effector T cells (CD4 T cells (T cells (Lymphocytes (Living cells)))).fcs.Rdata\")\n    NaiveTcells <- paste0(outpath, patindexesW26[patient], \"/ACC\", ACC, \"_Tube_0\", tube, \"_w\", week,\n                          \"_naive T cells (CD4 T cells (T cells (Lymphocytes (Living cells)))).fcs.Rdata\")\n    Tcm <- paste0(outpath, patindexesW26[patient], \"/ACC\", ACC, \"_Tube_0\", tube, \"_w\", week,\n                  \"_Tcm (CD4 T cells (T cells (Lymphocytes (Living cells)))).fcs.Rdata\")\n    Tem <- paste0(outpath, patindexesW26[patient], \"/ACC\", ACC, \"_Tube_0\", tube, \"_w\", week,\n                  \"_Tem (CD4 T cells (T cells (Lymphocytes (Living cells)))).fcs.Rdata\")\n    files <- c(EffTcells, NaiveTcells, Tcm, Tem)\n    manuG_labels <- manualG(files, old_tot, new_tot)\n    data <- fluoMarTube13(DataEx(manuG_labels$data, trans = \"log\"))\n    zerRM <- zeroRM(data[,c(mar1)], data[,c(mar2)], manuG_labels$labels)\n    dataM1 <- zerRM$m1\n    dataM2 <- zerRM$m2\n    labels <- zerRM$labels\n    indrm <- zerRM$indrm \n    \n    btf <- btfW26(\"~/DaliaTcells/AnalyseDaliaW26TcellsBtf.Rdata\", patient)\n    \n    # btf <- btfW26(\"~/DaliaTcells/AnalyseDaliaW26TcellsBtf_.Rdata\", patient)\n    \n    ind_inter_btf <- get(load(paste0(outpath, patindexesW26[patient], \"/ACC\", ACC, \"_Tube_0\", tube, \"_w\", week, \n                                     \"_Living cells.fcs.Rdata\")))\n    ind <- compMat2(manuG_labels$data,ind_inter_btf)\n    btf_labels <- relabel(btf$labels[ind])\n    # btf_labels <- btf$labels[ind]\n    btf_comb <- btf$combinations[ind,]\n    par(mfrow=c(1,2))\n    if(length(indrm))\n    {\n      plot(dataM1, dataM2, col = btf_labels[-c(indrm)], xlab = mar1, ylab = mar2, main = \"BTF\")\n    }\n    else\n    {\n      plot(dataM1, dataM2, col = btf_labels, xlab = mar1, ylab = mar2, main = \"BTF\")\n    }\n    legend(\"bottomleft\",as.character(c(2:5)),cex=.5, col=c(2:5),fill=c(2:5))\n    plot(dataM1, dataM2, col = labels, xlab = mar1, ylab = mar2, main = \"Manual\")\n    #   legend(\"bottomleft\",as.character(c(2:5)),cex=.5, col=c(2:5),fill=c(2:5))\n    \n  }\n  comb <- clusTag(btf_labels, btf_comb, minCard = minCard)  \n  return(\"combinations\" = comb)\n}\n",
    "created" : 1477214131992.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3317924660",
    "id" : "32179E06",
    "lastKnownWriteTime" : 1477214349,
    "last_content_update" : 1477214349833,
    "path" : "~/DaliaTcells/PlotDaliaTeff.r",
    "project_path" : null,
    "properties" : {
    },
    "relative_order" : 7,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}